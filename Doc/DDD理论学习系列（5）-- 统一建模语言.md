# DDD理论学习系列（5）-- 统一建模语言

​             ![96](https://upload.jianshu.io/users/upload_avatars/2799767/0b0f3fb5-f8b9-4bf4-ac1d-b94468c2e1c8.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/96/h/96) 

​             [圣杰](https://www.jianshu.com/u/39ec0e6b1844)                          

​                                2017.06.05 07:00*               字数 1233             阅读 2154评论 0喜欢 8

> [DDD理论学习系列——案例及目录](https://www.jianshu.com/p/6e2917551e63)

------

# 1.引言

上一节讲解了领域模型，领域模型主要是将业务中涉及到的概念以面向对象的思想进行抽象，抽象出实体对象，确定实体所对应的方法和属性，以及实体之间的关系。然后将这些实体和实体之间的关系以某种形式（比如UML、图形、代码、文字描述等）展现出来。而领域模型是领域建模的结果，那如何建模呢？我们可以借助于UML。

我们知道UML（统一建模语言）是一种用于绘制软件概念图的图形符号。在和他人交流以及帮助解决设计问题方法，图示是最有效的。在DDD中我们习惯用UML进行领域建模，所以为了后续章节的展开，我们需要而且必须熟悉常用UML的使用。之前也写了一篇文章，[想要学习设计模式，你得先会看类图，一张图读懂ＵＭＬ](https://www.jianshu.com/p/0cd7df8a7789)，介绍了一些基本的用法，不妨一看。

下面就开始简单介绍下几种常见的UML的基本用法。

# 2. UML的级别和类别

在《UML精粹》中，UML主要被分为三个级别：

-  **概念级别**：用来描述问题领域中概念和抽象的一种速记方法，没有比较严格的语义规则。和源代码之间没有很强的关联性。
-  **规格说明级别**：描绘问题的解决方案，目的是为了能够转换成源代码。要遵循严格的语义规则。
-  **实现级别**：用来描绘已有的源代码，如类图。要遵循严格的语义规则。

UML主要有三种图示类别：

-  **静态图（static diagram）**：描述了类、对象、数据结构以及它们之间的关系，展现出软件元素间不变的逻辑结构。类图、对象图都是静态图。
-  **动态图（dynamci diagram）**：展示软件实体在运行过程中是如何转换的，其中描述了运行流程或实体改变状态的方式。顺序图、协作图、状态图都是状态图。
-  **物理图（physical diagram）**：展示软件实体不变的物理结构，描述了诸如源文件、库、二进制文件、数据文件等物理实体以及它们之间的关系。

# 3. 案例分析

为了真正对UML有一个直观的认识，我们还是结合具体的业务场景（购物车）举例分析，进行UML图示 设计。

## 3.1.类图

类图主要展示程序中主要的类和关系。
 购物车主要涉及到四个对象：购物车、购物车子项、商品、类别。



![img](https://upload-images.jianshu.io/upload_images/2799767-95f23444fe65bf75.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/749)

购物车简单类图

在本图中，所有的关系都是聚合关系。

## 3.2. 对象图

对象图展示的是系统执行的某个特定时刻的一组对象和关系，可以看作内存快照。



![img](https://upload-images.jianshu.io/upload_images/2799767-5112756d84153c87.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/941)

购物车对象图

该图示就展示了当前购物车有两件商品。

## 3.3.顺序图

顺序图是一个动态模型，是为了清楚表达出消息的顺序。



![img](https://upload-images.jianshu.io/upload_images/2799767-5ef04b58cacfb9bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000)

购物车顺序图

其中要注意几个图示：

- 虚线：生命线。
- 窄条小矩形：激活，表示函数执行的时间。
- 方括号中的布尔表达式：监护条件。
- 小圆圈箭头：数据标记

## 3.4.协作图

协作图是为了表达出对象之间的关系。



![img](https://upload-images.jianshu.io/upload_images/2799767-b541b30082cdff19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/749)

购物车协作图

## 3.5.状态图

状态图是为了理解系统的行为和状态的转换。



![img](https://upload-images.jianshu.io/upload_images/2799767-f292f02a38e3133f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000)

订单状态图

该图就简要描述了，订单从正常、发货、关闭之间的状态转换。

# 4.总结

本文通过简单的案例简单介绍了几种常用的UML的用法。由于自己对UML也不是很了解，以上图示难免有所纰漏。

UML本身是一个复杂的东西，要完全掌握它是需要耗费很大时间和精力。但是我们在建模时要本着越少越好的思想去使用它。不要过于追求图示的详细程度，且UML图不是源代码，没有必要申明所有方法、变量和关系。
 在学习UML的时候，不建议一上来就去找一些UML画图工具，直接在纸上写写画画就好，本文的所有图示就是直接在草稿上设计的。

最后，最最最重要的是，请动手画！

